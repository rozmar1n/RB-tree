# RB-tree Playground

Небольшой учебный проект, в котором реализовано красно-чёрное дерево с операциями поиска, ранжирования и вычисления расстояния между ключами. Код сопровождается CLI-интерфейсом и набором тестов на GoogleTest.

## Сборка

```bash
cmake -S . -B build
cmake --build build
```

Требования: C++17 и CMake ≥ 3.16. После сборки в папке `build` будут исполняемые файлы и тесты.

## CLI — расстояние между ключами

Запуск:

```bash
./build/source/rb_tree_cli
```

Формат ввода — поток команд.

- `k <value>` — добавить ключ в дерево.
- `q <left> <right>` — посчитать, сколько ключей лежит строго между `left` и `right`, включая правую границу; если `right <= left`, результат `0`.

Вывод — последовательность чисел, разделённых пробелами, по одному на каждую команду `q`.

Пример:

```
$ ./build/source/rb_tree_cli
k 10 k 20 q 8 31 q 6 9 k 30 k 40 q 15 40
2 0 3
```

## Тесты

Сборка уже подтягивает GoogleTest. Чтобы запустить все тесты:

```bash
cd build
ctest --output-on-failure
```

Набор включает:

- `rb_balance_test` — проверка инвариантов дерева после вставок/удалений.
- `rb_memory_test` — корректность конструкторов/присваиваний.
- `rb_distance_test` — валидация рангов и вычисления расстояния.
- `rb_cli_test` — интеграционный тест CLI без участия `stdin`.

## Бенчмарк

Есть утилита `rb_benchmark`, сравнивающая производительность `rb::Tree` и `std::set` на идентичной нагрузке. Ключевые параметры:

- `--ops=<N>` — количество операций (по умолчанию 100000);
- `--insert-ratio=<0..1>` — доля вставок в последовательности;
- `--seed=<value>` — зерно генератора случайных чисел;
- `--max=<value>` — верхняя граница генерируемых ключей.

Запуск:

```bash
./build/source/rb_benchmark --ops=50000 --insert-ratio=0.6 --seed=7
```
